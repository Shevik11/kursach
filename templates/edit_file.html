<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Редагування файлу</title>
    <link rel="stylesheet" href="../static/css/style.css">
</head>
<body>
    <div class="container">
        <h2>Редагування файлу: {{ filename }}</h2>

        <!-- Форма для редагування вмісту файлу -->
        <form id="editForm" action="{{ url_for('files') }}" method="post">
            <input type="hidden" name="filename" value="{{ filename }}">
            <div class="form-group">
                <label for="content">Вміст файлу:</label>
                <textarea name="content" rows="10" required>{{ content }}</textarea>
            </div>
            <button type="button" onclick="showDescriptionModal()">Зберегти зміни</button>
        </form>

        <!-- Модальне вікно для опису змін -->
        <div id="descriptionModal" style="display:none;">
            <div class="modal-content">
                <h3>Опис змін</h3>
                <input type="text" id="description" name="description" placeholder="Короткий опис змін" required>
                <button onclick="submitForm()">Зберегти опис</button>
            </div>
        </div>
    </div>

    <script>
        function showDescriptionModal() {
            document.getElementById("descriptionModal").style.display = "block";
        }

        function submitForm() {
            const description = document.getElementById("description").value;
            if (description) {
                const descriptionInput = document.createElement("input");
                descriptionInput.type = "hidden";
                descriptionInput.name = "description";
                descriptionInput.value = description;
                document.getElementById("editForm").appendChild(descriptionInput);
                document.getElementById("editForm").submit();
            }
        }
    </script>
</body>
</html>
